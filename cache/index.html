<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Cache - BoltOn</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Cache";
    var mkdocs_page_input_path = "cache.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> BoltOn</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Introduction</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../requestor/">Requestor</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../data/">Data</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../bus/">Bus</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Cache</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#icacheresponse-and-iclearcachedresponse">ICacheResponse and IClearCachedResponse</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../cqrs/">CQRS</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../utilities/">Utilities</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../optional/">Optional</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../samples/">Samples</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../build/">CI & CD</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">BoltOn</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Cache</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>BoltOn Cache is just an adapter for .NET Core's <code>IDistributedCache</code>.</p>
<p>In order to use it, you have to do the following:</p>
<ul>
<li>Install <strong>BoltOn.Cache</strong> NuGet package in the host project.</li>
<li>Call <code>BoltOnCacheModule()</code> in your startup's BoltOn() method. </li>
<li>Install the appropriate NuGet package depending on the <code>IDistributedCache</code> implementations that .NET Core provides - Memory, Redis and SQL Server. Use the appropriate extension methods like <code>AddDistributedMemoryCache</code> or <code>AddDistributedSqlServerCache</code> or <code>AddStackExchangeRedisCache</code> to configure the underlying cache. </li>
<li>Finally, inject <a href="https://github.com/gokulm/BoltOn/blob/master/src/BoltOn/Cache/IBoltOnCache.cs">IBoltOnCache</a> whereever you want in your application.</li>
</ul>
<p>Example:</p>
<pre><code>var serviceCollection = new ServiceCollection();
serviceCollection.BoltOn(b =&gt;
{
    b.BoltOnCacheModule();
});

serviceCollection.AddStackExchangeRedisCache(options =&gt;
{
    options.Configuration = "localhost:6379";
});
</code></pre>
<h2 id="icacheresponse-and-iclearcachedresponse">ICacheResponse and IClearCachedResponse</h2>
<p>The BoltOnCacheModule comes with 2 other marker interfaces - <a href="https://github.com/gokulm/BoltOn/blob/master/src/BoltOn/Cache/ICacheResponse.cs">ICacheResponse</a> and <a href="https://github.com/gokulm/BoltOn/blob/master/src/BoltOn/Cache/IClearCachedResponse.cs">IClearCachedResponse</a> to cache and clear <a href="../requestor">Requestor</a>'s response automatically. It's done using <a href="https://github.com/gokulm/BoltOn/blob/master/src/BoltOn/Cache/CacheResponseInterceptor.cs">CacheResponseInterceptor</a>. </p>
<p>If the request implements <a href="https://github.com/gokulm/BoltOn/blob/master/src/BoltOn/Cache/ICacheResponse.cs">ICacheResponse</a>, the cache is checked before entering the pipeline, and if the response exists in the cache, the response is returned without executing the request's handler. If the response is not in the cache, the handler is executed and the response is cached before returning it, so that subsequent requests will be served by the cache. </p>
<p>Example:</p>
<pre><code>public class GetAllStudentsRequest : IQuery&lt;IEnumerable&lt;StudentDto&gt;&gt;, ICacheResponse
{
    public string CacheKey =&gt; "Students";

    public TimeSpan? SlidingExpiration =&gt; TimeSpan.FromHours(2);
}
</code></pre>
<p>If the request implements <a href="https://github.com/gokulm/BoltOn/blob/master/src/BoltOn/Cache/IClearCachedResponse.cs">IClearCachedResponse</a>, the cache is cleared before returning the response, and thus subsequent requests will enter the pipeline. </p>
<p>Example:</p>
<pre><code>public class CreateStudentRequest : IRequest&lt;Student&gt;, IClearCachedResponse
{
    public string FirstName { get; set; }

    public string LastName { get; set; }

    public int StudentTypeId { get; set; }

    public string CacheKey =&gt; "Students";
}
</code></pre>
<p><strong>Note:</strong>
<br />
<a href="https://github.com/gokulm/BoltOn/blob/master/src/BoltOn.Cache/BoltOnCache.cs">BoltOnCache</a> uses .NET Core's built-in serializer (System.Text.Json) for serializing cache values to byte array. You can switch the serializer by writing your own implemenation for <a href="https://github.com/gokulm/BoltOn/blob/master/src/BoltOn.Cache/BoltOnCacheSerializer.cs">IBoltOnCacheSerializer</a> and registering the implementation while bootstrapping your application.</p>
<p>Check out .NET Core's IDistributedCache documentation to know more about the other configurations and usage.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../cqrs/" class="btn btn-neutral float-right" title="CQRS">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../bus/" class="btn btn-neutral" title="Bus"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../bus/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../cqrs/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
